steps:
  - checkout: self
    clean: true

  - task: xamops.azdevex.provisionator-task.provisionator@1
    displayName: 'Provisionator'
    condition: eq(variables['provisioning'], 'true')
    inputs:
      provisioning_script: $(provisionator.path)
      provisioning_extra_args: $(provisionator.extraArguments)
  
  - task: Bash@3
    displayName: 'Cake Provision'
    condition: eq(variables['provisioningCake'], 'true')
    inputs:
      targetType: 'filePath'
      filePath: 'build.sh'
      arguments: --target provision --TeamProject="$(System.TeamProject)"
  
  - task: Bash@3
    displayName: 'Build NET6 Projects'
    inputs:
      targetType: 'filePath'
      filePath: 'build.sh'
      arguments: --target NET6 --TeamProject="$(System.TeamProject)"